<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Practica 2</title>
  </head>
  <body>
    <h1>Practica 2</h1>
    <p>
      Crea una funciÃ³n que reciba un nÃºmero en milisegundos y genere un
      temporizador que escriba el texto "Tiempo concluido" cuando pasen esos
      milisegundos. Realmente la funciÃ³n no escribe, genera una promesa cuyo
      resultado es el texto nombrado. En caso de que no se cumpla la promesa, el
      resultado serÃ¡ el texto: "El tiempo no va bien". Se decidirÃ¡ que la
      promesa no se ha cumplido cuando pase el doble de tiempo que el indicado.
      Crea un programa que invoque esta funciÃ³n (con 5 segundos) y escriba por
      pantalla (elemento HTML) los resultados de la promesa.
    </p>
    <button>Â¡TIEMPO!</button>
    <h3 id="content"></h3>

    <script>

      const btnTiempo = document.querySelector('button');
      btnTiempo.addEventListener('click', imprimir);

      function temporizar(ms) {
        return new Promise((resolve, reject) => {
          let concluido = false;
          let aleatorio = Math.random() < 0.5;
          console.log((aleatorio) ? 'mal' : 'bien');
          setTimeout(() => {
            if (!concluido && !aleatorio) {
              concluido = true;
              resolve('Â¡Tiempo concluido! ðŸ™‰')
            }
          }, ms);

          setTimeout(() => {
            if(!concluido) {
              concluido = true;
              reject('Â¡El tiempo no va bien! ðŸ™ˆ')
            }
          }, ms * 2);
        });
      }

      async function probar() {
        try {
          let text = await temporizar(5000);
          return text;
        } catch(error) {
          return error;
        }
      }

      async function imprimir() {
        let content = document.getElementById('content');
        content.textContent = await probar();
      }
      

    </script>
  </body>
</html>
